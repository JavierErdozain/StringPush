<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Socket.IO Express Example</title>
  </head>
  <body>
    <h1>Socket.IO Express Example</h1>
    
    <form id="set-nickname">
      <label for="nickname">Nickname:</label>
      <input type="text" id="nickname" />
      <input type="submit" />
    </form>
      
    <form id="send-message">
        <textarea id="message"></textarea>
        <input type="submit" />        
    </form>
      
      <section id ="mensajes"></section>
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect();
        jQuery(function ($) {
               
               var nickName = $('#nickname');
               var setNicknameForm = $('#set-nickname');
               setNicknameForm.submit(function(event) {
                                    event.preventDefault(); 
                                    socket.emit('nickname', nickName.val());
                                      });
        
               var mensajeEnviar = $("#message");
               var formEnvio = $("#send-message");
               var menssages =$("#mensajes");
               
               formEnvio.submit(function (event){
                         event.preventDefault();
                         socket.emit('send-message', mensajeEnviar.val());
                         });
               
               socket.on('user-message', function(data){                         
                         menssages.append('<p>'+ data +'</p>');
                       
                       });
                         
      });
    </script>
  </body>
</html>